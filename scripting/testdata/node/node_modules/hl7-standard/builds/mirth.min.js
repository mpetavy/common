'use strict';function _toConsumableArray(a){return _arrayWithoutHoles(a)||_iterableToArray(a)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(a){if(Symbol.iterator in Object(a)||"[object Arguments]"===Object.prototype.toString.call(a))return Array.from(a)}function _arrayWithoutHoles(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _defineProperties(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}function _createClass(a,b,c){return b&&_defineProperties(a.prototype,b),c&&_defineProperties(a,c),a}function _typeof(a){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(a){return typeof a}:function _typeof(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},_typeof(a)}String.prototype.startsWith||Object.defineProperty(String.prototype,"startsWith",{value:function value(a,b){return pos=0<b?0|b:0,this.substring(pos,pos+a.length)===a}});var _addBatchSegment=function _addBatchSegment(a,b){if("HL7"!==a.constructor.name)throw new Error("HL7 data added is not HL7 constructor");return this[b].push(a)},_addToBatch=function _addToBatch(a){if("HL7"!==a.constructor.name)throw new Error("HL7 data added is not HL7 constructor");return this.container.push(a)},_splitBatch=function _splitBatch(a){return function(b){var c=1<arguments.length&&arguments[1]!==void 0?arguments[1]:[];a.sort(function(c,a){return c-a});for(var d=0;d<a.length;d++){var e=a[d],f=a[d+1];d+1===a.length&&(f=b.length),c.push(b.slice(e,f))}return c}},_getSegIndexes=function _getSegIndexes(a,b){for(var c=2<arguments.length&&arguments[2]!==void 0?arguments[2]:[],d=0;d<a.length;d++)for(var e=new RegExp(a[d],"g"),f=void 0;f=e.exec(b);)null!==f.index&&c.push(f.index);return c},_isBatch=function _isBatch(a,b){return!!("string"==typeof a&&(a.startsWith("FHS")||a.startsWith("BHS")||b))},_batchIterate=function _batchIterate(a){for(var b=0;b<this.container.length;b++)a.call(this,b,this.container[b])},_invalidSegments=function _invalidSegments(a){return a.some(function(a){return null!==a.match(/[^A-Z0-9]/g)})},_defineLineEndings=function _defineLineEndings(a,b){function _mode(a){var c=Math.max,d=a.reduce(function(a,b){return b in a||(a[b]=0),a[b]++,a},{}),e=Object.keys(d),f=e.map(function(a){return d[a]}),g=c.apply(null,f),h=[];return e.forEach(function(a){d[a]===g&&h.push(a)}),h.length?b(null,h[0]):b(new Error("HL7 data must contain valid line endings ['\\r\\n', '\\n', or '\\r'] to be parsed."),null)}var c=a.match(/\r\n|\r|\n/g)||[];return _mode(c)},_transformSegment=function _transformSegment(a){for(var b,c=a.segment,d=a.name,e=a.content,f=a.isMSH,g=a.parseOptions,h=g.subComponents,i=g.repeatingFields,m=1;m<e.length;m++)if(b=f?m+1:m,-1<e[m].indexOf(h)){var q=e[m].split(h);c.data["".concat(d,".").concat(b)]=[];for(var r=0;r<q.length;r++){for(var n={},o=q[r].split("^"),p=0;p<o.length;p++)if(-1<o[p].indexOf(i)){var j=o[p].split(i);n["".concat(d,".").concat(b,".").concat(p+1)]=[];for(var s=0;s<j.length;s++)n["".concat(d,".").concat(b,".").concat(p+1)].push(j[s])}else n["".concat(d,".").concat(b,".").concat(p+1)]=o[p];c.data["".concat(d,".").concat(b)].push(n)}}else if(-1<e[m].indexOf("^")){var l=e[m].split("^");c.data["".concat(d,".").concat(b)]={};for(var t=0;t<l.length;t++)if(-1<l[t].indexOf(i)){var u=l[t].split(i);c.data["".concat(d,".").concat(b)]["".concat(d,".").concat(b,".").concat(t+1)]=[];for(var v=0;v<u.length;v++)c.data["".concat(d,".").concat(b)]["".concat(d,".").concat(b,".").concat(t+1)].push(u[v])}else c.data["".concat(d,".").concat(b)]["".concat(d,".").concat(b,".").concat(t+1)]=l[t]}else if(-1<e[m].indexOf(i)){var w=e[m].split(i);c.data["".concat(d,".").concat(b)]=[];for(var x=0;x<w.length;x++)c.data["".concat(d,".").concat(b)].push(w[x])}else c.data["".concat(d,".").concat(b)]=e[m];return c},_buildSegment=function _buildSegment(a,b,c,d){for(var e,f=d.subComponents,g=d.repeatingFields,h=0;h<b.length;h++)if(e=c.data[b[h]],Array.isArray(e)){for(var p=0;p<e.length;p++)if("object"===_typeof(e[p])){var m=Object.keys(e[p]);m.length||(a+=f);for(var q,r=0;r<m.length;r++)if(q=e[p][m[r]],Array.isArray(q))for(var n=0;n<q.length;n++)a+=n+1===q.length&&r+1===m.length&&p+1===e.length?"".concat(q[n],"|"):n+1===q.length&&r+1===m.length?"".concat(q[n]).concat(f):n+1===q.length?"".concat(q[n],"^"):"".concat(q[n]).concat(g);else a+=r+1===m.length&&p+1===e.length?"".concat(q,"|"):r+1===m.length?"".concat(q).concat(f):"".concat(q,"^")}else a+=p+1===e.length?"".concat(e[p],"|"):"".concat(e[p]).concat(f);}else if("object"===_typeof(e)){for(var i,k=Object.keys(e),l=0;l<k.length;l++)if(i=e[k[l]],Array.isArray(i))for(var o=0;o<i.length;o++)a+=o+1===i.length&&l+1===k.length?"".concat(i[o],"|"):o+1===i.length?"".concat(i[o],"^"):"".concat(i[o]).concat(g);else a+=l+1===k.length?"".concat(i,"|"):"".concat(i,"^");}else a+="".concat(e,"|");return a},_build=function _build(a,b){for(var c,d=Object.keys(a),e=[],f=0;f<d.length;f++)if(c=a[d[f]],Array.isArray(c)){for(var n=0;n<c.length;n++)if(c[n]){var g=d[f]+"|",h=Object.keys(c[n].data),j=c[n].index;e.push({index:j,line:_buildSegment(g,h,c[n],b)})}}else{var k=d[f]+"|",l=Object.keys(c.data),m=c.index;e.push({index:m,line:_buildSegment(k,l,c,b)})}return e},_defineField=function _defineField(a){if("string"!=typeof a)throw new Error("Cannot set/get HL7 field: ".concat(a,". The parameter 'field' must be a string."));var b=a.split("."),c="undefined"!=typeof b[0]&&3===b[0].length?b[0]:null,d="undefined"==typeof b[1]?null:"".concat(b[0],".").concat(b[1]),e="undefined"==typeof b[2]?null:"".concat(b[0],".").concat(b[1],".").concat(b[2]);return{notation:b,segment:c,section:d,sub:e}},_segmentExists=function _segmentExists(a,b){var c="undefined"!=typeof this.transformed[a],d=!1;return c&&(d=!!Array.isArray(this.transformed[a])),d&&(c="undefined"!=typeof this.transformed[a][b?b:0]),{segmentExists:c,isArray:d}},_sectionExists=function _sectionExists(a,b,c){var d=!1,e=!1,f="undefined"!=typeof a.data[b];return f&&(d=!!Array.isArray(a.data[b]),"number"==typeof c&&d&&(e="undefined"!=typeof a.data[b][c?c:0])),{sectionExists:f,isAtIndex:e,isArray:d}},_subSectionExists=function _subSectionExists(a,b,c){var d=!1,e=!1,f="undefined"!=typeof a[b];return f&&(d=!!Array.isArray(a[b]),"number"==typeof c&&d&&(e="undefined"!=typeof a[b][c?c:0])),{subSectionExists:f,isAtIndex:e,isArray:d}},_createSection=function _createSection(a,b){for(var c="MSH"===a.type?2:1;c<=b;c++)"undefined"==typeof a.data["".concat(a.type,".").concat(c)]&&(a.data["".concat(a.type,".").concat(c)]="");return a},_createSectionAtIndex=function _createSectionAtIndex(a,b){var c=2<arguments.length&&arguments[2]!==void 0?arguments[2]:0;a=b?a:["undefined"==typeof a?{}:a];for(var d=0;d<=c;d++)"undefined"==typeof a[d]&&(a[d]={});return a},_createSubSection=function _createSubSection(a,b,c){a="object"===_typeof(a)?a:{};for(var d=1;d<=c;d++)"undefined"==typeof a["".concat(b,".").concat(d)]&&(a["".concat(b,".").concat(d)]="");return a},_createSubSectionAtIndex=function _createSubSectionAtIndex(a,b){var c=2<arguments.length&&arguments[2]!==void 0?arguments[2]:0;a=b?a:["undefined"==typeof a?"":a];for(var d=0;d<=c;d++)"undefined"==typeof a[d]&&(a[d]="");return a},_validSegment=function _validSegment(a){return!("string"!=typeof a||3!==a.length)},_moveSegment=function _moveSegment(a,b){for(var c=Object.keys(this.transformed),d=0;d<c.length;d++)for(var e=0;e<this.transformed[c[d]].length;e++)this.transformed[c[d]][e]&&this.transformed[c[d]][e].index>=a&&(b?this.transformed[c[d]][e].index++:this.transformed[c[d]][e].index--);return this},_cleanse=function _cleanse(a){for(var b,c=0;c<a.length;c++)for(b=this.transformed[a[c]].length;0<=b;)this.transformed[a[c]][b]||this.transformed[a[c]].splice(b,1),b--},_SegmentGenerator=function _SegmentGenerator(a){return new(function Segment(a,b){this.type=b,this.data={},this.set=function(a,b,c,d,e){var f=Array.isArray(a.transformed[this.type])?a.transformed[this.type].indexOf(this):0;return a.set.call(a,b,c,f,d,e)}.bind(this,a),this.get=function(a,b,c,d){var e=Array.isArray(a.transformed[this.type])?a.transformed[this.type].indexOf(this):0;return a.get.call(a,b,e,c,d)}.bind(this,a)}.bind(this))(this,a)};var HL7=function(){function HL7(){var a=this,b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};_classCallCheck(this,HL7),this.raw="string"==typeof b?b:"",this.transformed={},this.encoded="",this.parseOptions={subComponents:c.subComponents?c.subComponents:"~",repeatingFields:c.repeatingFields?c.repeatingFields:"&"},this.forceBatch=!1,this.isBatch=function(){return a.forceBatch},this.lastIndex=0}return _createClass(HL7,[{key:"transform",value:function transform(a){var c=this,d=!!(1<arguments.length&&void 0!==arguments[1])&&arguments[1];if(!this.raw.startsWith("MSH")&&!this.raw.startsWith("FHS")&&!this.raw.startsWith("BHS")&&!this.raw.startsWith("BTS")&&!this.raw.startsWith("FTS")){var g=new Error("Expected raw data to be HL7");return a(g,null);throw g}if(!d&&_isBatch(this.raw,this.forceBatch)){delete this.transformed,this.header=[],this.trailer=[],this.container=[],this.forceBatch=!0,this.get=null,this.set=null,this.createSegment=null,this.getSegmentsAfter=null,this.iterate=null;for(var e=_splitBatch(_toConsumableArray(_getSegIndexes(["FHS","BHS","MSH","BTS","FTS"],this.raw)))(this.raw),b=function _loop(a){var b=new HL7(e[a]);b.transform(function(a){if(a)throw a;(b.transformed.FHS||b.transformed.BHS)&&_addBatchSegment.call(c,b,"header"),(b.transformed.BTS||b.transformed.FTS)&&_addBatchSegment.call(c,b,"trailer"),b.transformed.MSH&&_addToBatch.call(c,b)},!0)},f=0;f<e.length;f++)b(f);if(this.iterate=_batchIterate,a)return a(null,this.container)}else _defineLineEndings(this.raw,function(b,d){if(b)return a(b,null);var e=c.parseOptions,f=c.raw.split(d).filter(function(a){return-1<a.indexOf("|")}),g=!1;c.lastIndex=f.length-1;for(var h,j=0;j<f.length;j++)if(h=f[j].substring(0,3),g="MSH"===h,!(-1<Object.keys(c.transformed).indexOf(h))){var i=_SegmentGenerator.call(c,h);i.index=j;var k=f[j].split("|");i=_transformSegment({segment:i,name:h,content:k,isMSH:g,parseOptions:e}),c.transformed[h]=[i]}else if(Array.isArray(c.transformed[h])){var l=_SegmentGenerator.call(c,h);l.index=j;var m=f[j].split("|");l=_transformSegment({segment:l,name:h,content:m,isMSH:g,parseOptions:e}),c.transformed[h].push(l)}else{var n=c.transformed[h];c.transformed[h]=[],c.transformed[h].push(n);var o=_SegmentGenerator.call(c,h);o.index=j;var p=f[j].split("|");o=_transformSegment({segment:o,name:h,content:p,isMSH:g,parseOptions:e}),c.transformed[h].push(o)}if(c.transformed.MSH&&(c.transformed.MSH[0].data["MSH.2"]="^~\\&"),_invalidSegments(Object.keys(c.transformed))){var q=new Error("HL7 Data contains invalid EOL characters");if(a)return a(q,null);throw q}else if(a)return a(null,c.transformed)})}},{key:"build",value:function build(){var a=this,b=this.transformed,c=this.parseOptions;return this.encoded="",this.isBatch()?(this.header.forEach(function(b){a.encoded+=_build(b.transformed,c).sort(function(c,a){return c.index-a.index}).map(function(a){return a.line}).join("\r\n"),a.encoded+="\r\n"}),this.container.forEach(function(b){a.encoded+=_build(b.transformed,c).sort(function(c,a){return c.index-a.index}).map(function(a){return a.line}).join("\r\n"),a.encoded+="\r\n"}),this.trailer.forEach(function(b){a.encoded+=_build(b.transformed,c).sort(function(c,a){return c.index-a.index}).map(function(a){return a.line}).join("\r\n"),a.encoded+="\r\n"})):this.encoded+=_build(b,c).sort(function(c,a){return c.index-a.index}).map(function(a){return a.line}).join("\r\n"),this.encoded}},{key:"set",value:function set(a,b,c,d,e){var f=_defineField(a),g=f.notation,h=f.segment,i=f.section,j=f.sub,k=_segmentExists.apply(this,[h,c]);if(k.segmentExists){var l=k.isArray?this.transformed[h][c?c:0]:this.transformed[h];if(null!==i){var m=_sectionExists.apply(this,[l,i,d]);m.sectionExists||(l=_createSection(l,g[1])),m.isAtIndex||"number"!=typeof d||(l.data[i]=_createSectionAtIndex(l.data[i],m.isArray,d));var n=Array.isArray(l.data[i])?l.data[i][d?d:0]:l.data[i];if(null!==j){var o=_subSectionExists.apply(this,[n,j,e]);if(o.subSectionExists||(Array.isArray(l.data[i])?l.data[i][d?d:0]=_createSubSection(l.data[i][d?d:0],i,g[2]):l.data[i]=_createSubSection(l.data[i],i,g[2])),o.isAtIndex||"number"!=typeof e||(Array.isArray(l.data[i])?Array.isArray(l.data[i][d?d:0][j])?l.data[i][d?d:0][j][e?e:0]=_createSubSectionAtIndex(l.data[i][d?d:0][j][e?e:0],o.isArray,e):l.data[i][d?d:0][j]=_createSubSectionAtIndex(l.data[i][d?d:0][j],o.isArray,e):Array.isArray(l.data[i][j])?l.data[i][j][e?e:0]=_createSubSectionAtIndex(l.data[i][j][e?e:0],o.isArray,e):l.data[i][j]=_createSubSectionAtIndex(l.data[i][j],o.isArray,e)),Array.isArray(l.data[i])){if(Array.isArray(l.data[i][d?d:0][j])){if("string"==typeof b)return l.data[i][d?d:0][j][e?e:0]=b;throw new Error("DataType must be a string to set field")}else{if("string"==typeof b||Array.isArray(b))return l.data[i][d?d:0][j]=b;throw new Error("DataType must be a string or an array to set field")}}else if(Array.isArray(l.data[i][j])){if("string"==typeof b)return l.data[i][j][e?e:0]=b;throw new Error("DataType must be a string to set field")}else{if("string"==typeof b||Array.isArray(b))return l.data[i][j]=b;throw new Error("DataType must be a string or an array to set field")}}else return Array.isArray(l.data[i])?l.data[i][d?d:0]=b:l.data[i]=b}else{if("object"===_typeof(b)&&!Array.isArray(b))return l.data=b;throw new Error("Must provide object notation in order to overwrite existing segment")}}else throw new Error("Values cannot be set on segment that does not exist: ".concat(h))}},{key:"get",value:function get(a,b,c,d){b=b||0,c=c||0,d=d||0;var e=_defineField(a),f=e.notation,g=e.segment,h=e.section,i=e.sub;if(null!==g&&null!==h&&null!==i){if("undefined"!=typeof this.transformed[g]){if("undefined"!=typeof this.transformed[g][b].data[h]){if(Array.isArray(this.transformed[g][b].data[h])){if("undefined"!=typeof this.transformed[g][b].data[h][c][i])return Array.isArray(this.transformed[g][b].data[h][c][i])?this.transformed[g][b].data[h][c][i][d]:this.transformed[g][b].data[h][c][i];var j=this.transformed[g][b].data[h][c];return 1==f[2]&&"string"==typeof j?j:null}if("undefined"!=typeof this.transformed[g][b].data[h][i])return Array.isArray(this.transformed[g][b].data[h][i])?this.transformed[g][b].data[h][i][d]:this.transformed[g][b].data[h][i];var k=this.transformed[g][b].data[h];return 1==f[2]&&"string"==typeof k?k:null}return null}return null}if(null!==g&&null!==h)return"undefined"==typeof this.transformed[g]?null:"undefined"==typeof this.transformed[g][b].data[h]?null:Array.isArray(this.transformed[g][b].data[h])?this.transformed[g][b].data[h][c]:this.transformed[g][b].data[h];if(null!==g)return"undefined"==typeof this.transformed[g]?null:this.transformed[g][b].data;throw new Error("Segment name must be provided as parameter to get function")}},{key:"getSegment",value:function getSegment(a){if(!_validSegment(a))throw new Error("Cannot get segment after because 'segment' parameter: is invalid.");return this.transformed[a]&&this.transformed[a][0]?this.transformed[a][0]:null}},{key:"getSegments",value:function getSegments(a){var c=this;if(a){if(!_validSegment(a))throw new Error("Cannot get segments because 'segment' parameter: is invalid.");return this.transformed[a]?this.transformed[a]:[]}return Object.keys(this.transformed).reduce(function(d,e){return d=d.concat(c.transformed[e]),d},[])}},{key:"createSegment",value:function createSegment(a){if(!_validSegment(a))throw new Error("Cannot create segment because 'segment' parameter: is invalid.");var b="undefined"!=typeof this.transformed[a];if(this.lastIndex++,b){if(Array.isArray(this.transformed[a])){var f=_SegmentGenerator.call(this,a);return f.index=this.lastIndex,this.transformed[a].push(f),f}var c=this.transformed[a];this.transformed[a]=[];var d=_SegmentGenerator.call(this,a);return d.index=this.lastIndex,this.transformed[a]=this.transformed[a].concat([c,d]),d}var e=_SegmentGenerator.call(this,a);return e.index=this.lastIndex,this.transformed[a]=[e],e}},{key:"createSegmentAfter",value:function createSegmentAfter(a){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(!_validSegment(a))throw new Error("Cannot create segment after because 'segment' parameter: is invalid.");var c="undefined"!=typeof this.transformed[a];if("Segment"!==b.constructor.name)throw new Error("Cannot create segment after because 'afterSegment' parameter: is invalid.");this.lastIndex++;var d=b.index+1;if(c){if(Array.isArray(this.transformed[a])){_moveSegment.call(this,d,!0);var h=_SegmentGenerator.call(this,a);return h.index=d,this.transformed[a].push(h),h}_moveSegment.call(this,d,!0);var e=this.transformed[a];this.transformed[a]=[];var f=_SegmentGenerator.call(this,a);return f.index=d,this.transformed[a]=this.transformed[a].concat([e,f]),f}_moveSegment.call(this,d,!0);var g=_SegmentGenerator.call(this,a);return g.index=d,this.transformed[a]=[g],g}},{key:"createSegmentBefore",value:function createSegmentBefore(a){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(!_validSegment(a))throw new Error("Cannot create segment before because 'segment' parameter: is invalid.");var c="undefined"!=typeof this.transformed[a];if("Segment"!==b.constructor.name)throw new Error("Cannot create segment before because 'beforeSegment' parameter: is invalid.");this.lastIndex++;var d=b.index-1;if(c){if(Array.isArray(this.transformed[a])){_moveSegment.call(this,d,!1);var h=_SegmentGenerator.call(this,a);return h.index=d,this.transformed[a].push(h),h}_moveSegment.call(this,d,!1);var e=this.transformed[a];this.transformed[a]=[];var f=_SegmentGenerator.call(this,a);return f.index=d,this.transformed[a]=this.transformed[a].concat([e,f]),f}_moveSegment.call(this,d,!1);var g=_SegmentGenerator.call(this,a);return g.index=d,this.transformed[a]=[g],g}},{key:"deleteSegment",value:function deleteSegment(a){if("Segment"!==a.constructor.name)throw new Error("Cannot delete segment because 'segment' parameter: is invalid.");this.deleteSegments.call(this,[a])}},{key:"deleteSegments",value:function deleteSegments(a){Array.isArray(a)||(a=[a]);for(var b=a.map(function(a){var b=a.type;return b}).filter(function(c,a,b){return a===b.indexOf(c)}),c=0,d=a.length-1;c<=d;)delete this.transformed[a[c].type][this.transformed[a[c].type].indexOf(a[c])],c++;_cleanse.call(this,b)}},{key:"getSegmentsAfter",value:function getSegmentsAfter(a,b,c,d){var e=Math.min,f=[],g=null,h=null;if(c=c||!1,"undefined"!=typeof a&&"Segment"===a.constructor.name){if("undefined"!=typeof d)if(Array.isArray(d)){for(var j=[],k=null,l=0;l<d.length;l++)"undefined"!=typeof this.transformed[d[l]]&&(k=Array.isArray(this.transformed[d[l]])?this.transformed[d[l]].map(function(a){return a.index}).find(function(b){return b>a.index}):this.transformed[d[l]].index,"undefined"==typeof k&&(k=null),null!==k&&(a.index>k&&(k=null),null!==k&&j.push(k)));h=j.length?e.apply(Math,j):null}else"undefined"!=typeof this.transformed[d]&&(h=Array.isArray(this.transformed[d])?this.transformed[d].map(function(a){return a.index}).find(function(b){return b>a.index}):this.transformed[d].index,"undefined"==typeof h&&(h=null),null!==h&&a.index>h&&(h=null));if(_validSegment(b)){if("undefined"!=typeof this.transformed[b]){for(var m=0;m<this.transformed[b].length;m++)if(this.transformed[b][m].index>a.index)if(c){if(null===g)f.push(this.transformed[b][m]);else if(g+1===this.transformed[b][m].index)f.push(this.transformed[b][m]);else return f;g=this.transformed[b][m].index}else if(null===h)f.push(this.transformed[b][m]);else if(this.transformed[b][m].index<h)f.push(this.transformed[b][m]);else return f;return f}return f}throw new Error("Cannot get segments because segment name is invalid: ".concat(b))}else throw new Error("Cannot retrieve start position from segment.")}},{key:"moveSegmentAfter",value:function moveSegmentAfter(a,b){if("Segment"!==a.constructor.name)throw new Error("Cannot create segment before because 'segment' parameter: is invalid.");if("Segment"!==b.constructor.name)throw new Error("Cannot create segment before because 'afterSegment' parameter: is invalid.");var c=b.index+1;_moveSegment.call(this,c,!0),a.index=c}},{key:"moveSegmentBefore",value:function moveSegmentBefore(a,b){if("Segment"!==a.constructor.name)throw new Error("Cannot create segment before because 'segment' parameter: is invalid.");if("Segment"!==b.constructor.name)throw new Error("Cannot create segment before because 'beforeSegment' parameter: is invalid.");var c=b.index;_moveSegment.call(this,c,!0),a.index=c}}]),HL7}();
